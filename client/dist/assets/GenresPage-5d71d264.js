import{j as e,r as c}from"./react-b72defc1.js";import{u as z,E,d as S,D as C,b as D,B as F}from"./index-37be9204.js";import{r as t}from"./@material-tailwind-31758b72.js";import{aB as I,aC as A,aD as R,aa as k}from"./react-icons-b7cccd47.js";import{u as T}from"./react-hook-form-592090e6.js";import{E as $}from"./ErrorFormField-6ee19dad.js";import{o as U}from"./@hookform-8062e1fd.js";import{c as _,a as O}from"./yup-b6e2225a.js";import{a as b}from"./axios-28bc18a3.js";import{_ as d,I as N}from"./react-hot-toast-7c13a961.js";import"./@emotion-dbfef640.js";import"./react-dom-c53f0256.js";import"./scheduler-765c72db.js";import"./tw-elements-ab3535c4.js";import"./react-router-dom-fc96d914.js";import"./react-router-1941b8c8.js";import"./@remix-run-3d0d33fe.js";import"./react-spinners-4d5ffb55.js";import"./flowbite-react-827eff7f.js";import"./react-indiana-drag-scroll-6942150b.js";import"./@floating-ui-b9e68a19.js";import"./aria-hidden-318acb9e.js";import"./tabbable-6ab97b54.js";import"./recharts-b436783c.js";import"./clsx-0839fdbe.js";import"./lodash-36a35ae7.js";import"./react-smooth-ce808070.js";import"./prop-types-1cbc6ab3.js";import"./fast-equals-a0711cdd.js";import"./tiny-invariant-dd7d57d2.js";import"./d3-shape-9e788a4f.js";import"./d3-path-41c4cb36.js";import"./victory-vendor-5e3e398c.js";import"./d3-scale-4cce9527.js";import"./internmap-7949acc8.js";import"./d3-array-7d9b19f9.js";import"./d3-time-format-aa787c71.js";import"./d3-time-9ce187c0.js";import"./d3-interpolate-8fa1f6ff.js";import"./d3-color-6502c434.js";import"./d3-format-ffdb8652.js";import"./recharts-scale-170b47f7.js";import"./decimal.js-light-6fe16ef2.js";import"./eventemitter3-5051c9e6.js";import"./classnames-63c61219.js";import"./tailwind-merge-4e201461.js";import"./deepmerge-1a216343.js";import"./tslib-e99c189e.js";import"./hey-listen-e9db0d45.js";import"./style-value-types-86c13b32.js";import"./popmotion-e8151042.js";import"./framesync-409e5dda.js";import"./@motionone-d9be48c4.js";import"./material-ripple-effects-ffa693ae.js";import"./goober-70b4b9ca.js";import"./property-expr-38205fa5.js";import"./tiny-case-d0726479.js";import"./toposort-dff2028e.js";const q=_().shape({name:O().required()}),H=({closeModal:n})=>{var p;const r="https://api.bongomusicawards.co.tz/api/v1",{register:i,handleSubmit:l,formState:{errors:s}}=T({resolver:U(q)}),g=async x=>{n();const o=d.loading("Processing..");b.post(`${r}/genres`,x).then(m=>{if(m.status==201){d.dismiss(o);const u=d.success("Genre created successfully.");setTimeout(()=>{d.dismiss(u),window.location.reload()},3e3)}}).catch(()=>{d.dismiss(o),d.error("Failed to create.")})};return e.jsx(t.Card,{className:"mx-auto max-h-[95vh] w-full max-w-[24rem] overflow-y-auto rounded-md",children:e.jsx("form",{onSubmit:l(g),children:e.jsxs(t.CardBody,{className:"flex flex-col gap-4",children:[e.jsx("div",{className:"flex flex-row items-center justify-between uppercase",children:e.jsx(t.Typography,{variant:"h4",className:"font-LatoBold text-xl capitalize text-gray-900",children:"New Genre"})}),e.jsxs("div",{className:"my-4 w-full",children:[e.jsx("label",{htmlFor:"firstname",className:"block font-LatoBold text-sm capitalize text-gray-900",children:"Genre"}),e.jsx("input",{type:"text",className:"mt-1 h-10 w-full rounded-md border border-gray-300 p-2 pl-4 font-LatoRegular",placeholder:"Enter Genre name",...i("name",{required:!0})}),s.name&&e.jsx($,{message:`Genre ${(p=s.name)==null?void 0:p.message}`})]}),e.jsxs("div",{className:"flex flex-row items-center justify-end gap-1",children:[e.jsx(t.Button,{size:"sm",onClick:n,className:"h-10 rounded-full bg-transparent font-LatoBold capitalize text-gray-900 shadow-none transition ease-in-out hover:bg-gray-200",children:"cancel"}),e.jsx(t.Button,{type:"submit",size:"sm",className:"h-10 rounded-full bg-gray-900 font-LatoBold capitalize transition ease-in-out hover:bg-yellow-300 hover:text-gray-900",children:"create"})]})]})})})},P=({closeModal:n,fetchData:r,genre:i})=>{const l="https://api.bongomusicawards.co.tz/api/v1",[s,g]=c.useState(i),p=o=>{const{name:m,value:u}=o.target;g(f=>({...f,[m]:u}))},x=o=>{o.preventDefault(),n(),b.patch(`${l}/genres/${s==null?void 0:s.id}`,{name:s==null?void 0:s.name}).then(m=>{m.status==200?(r(),d.success("Genre Updated Successfully")):d.error("Failed to Update Genre.")}).catch(()=>{d.error("Failed to Update Genre.")})};return e.jsx(t.Card,{className:"mx-auto w-full max-w-[24rem] rounded-md",children:e.jsxs("form",{onSubmit:o=>x(o),children:[e.jsx(t.CardHeader,{className:"px-2 py-4 shadow-none",children:e.jsx(t.Typography,{variant:"h4",className:"font-LatoBold text-2xl capitalize text-gray-900",children:"Edit Genre"})}),e.jsx(t.CardBody,{className:"flex flex-col gap-4",children:e.jsxs("div",{className:"flex flex-col items-start gap-2 font-LatoBold text-gray-900",children:[e.jsx(t.Typography,{className:"capitalize",children:"name"}),e.jsx("input",{type:"text",value:s==null?void 0:s.name,name:"name",className:"h-[2rem] w-full rounded border-gray-300 font-LatoRegular text-sm",placeholder:"Name of Genre",onChange:o=>p(o),required:!0})]})}),e.jsxs(t.CardFooter,{className:"flex flex-row items-center justify-end gap-1",children:[e.jsx(t.Button,{size:"md",onClick:n,className:"rounded-full bg-transparent font-LatoBold capitalize text-gray-900 shadow-none transition ease-in-out hover:bg-gray-200",children:"cancel"}),e.jsx(t.Button,{type:"submit",size:"md",className:"rounded-full font-LatoRegular capitalize transition ease-in-out hover:bg-yellow-300 hover:font-LatoBold hover:text-gray-900",children:"save changes"})]})]})})},M=()=>e.jsx("div",{className:"flex flex-row items-center justify-between my-2 animate-pulse",children:e.jsxs("div",{className:"flex flex-row items-center gap-2",children:[e.jsx("div",{className:"py-5 px-24 rounded-full bg-slate-200 shadow-sm"}),e.jsx("div",{className:"py-5 px-14 rounded-full bg-slate-200 shadow-sm"}),e.jsx("div",{className:"py-5 px-16 rounded-full bg-slate-200 shadow-sm"}),e.jsx("div",{className:"py-5 px-14 rounded-full bg-slate-200 shadow-sm"}),e.jsx("div",{className:"py-5 px-20 rounded-full bg-slate-200 shadow-sm"})]})}),J=()=>{const n="https://api.bongomusicawards.co.tz/api/v1",{data:r,loading:i,error:l,fetchData:s}=z(`${n}/genres`),[g,p]=c.useState(null),[x,o]=c.useState(null),[m,u]=c.useState(!1),f=()=>u(a=>!a),w=a=>{o(a),a.id&&p(a.id),u(h=>!h)},[j,B]=c.useState(""),[G,y]=c.useState(!1),L=()=>y(a=>!a),v=a=>{a&&B(a),y(h=>!h)};return e.jsxs(e.Fragment,{children:[i?e.jsx(M,{}):l?e.jsx(E,{errorName:l.name,message:l.message}):(r==null?void 0:r.data.length)===0?e.jsx(S,{itemName:"genre"}):e.jsx("div",{className:"flex flex-row flex-wrap gap-2 py-2",children:r==null?void 0:r.data.map((a,h)=>e.jsxs("div",{className:"relative group flex items-center justify-between gap-2 font-LatoBold text-xs text-gray-800 hover:text-gray-50 uppercase bg-amber-100 hover:bg-gray-800 transition ease-linear w-fit px-4 py-2 rounded-full",children:[e.jsx(I,{className:"text-lg text-gray-700 group-hover:text-gray-50 transition ease-linear"}),a.name,e.jsxs("div",{className:"invisible group-hover:visible transition-opacity duration-300 opacity-0 group-hover:opacity-100 flex flex-row items-center gap-2 bg-amber-50 px-2 rounded-full",children:[e.jsx(A,{onClick:()=>w(a),className:"cursor-pointer rounded-full text-lg text-green-500 hover:border-2 hover:border-green-500"}),e.jsx(R,{onClick:()=>v(a.id),className:"cursor-pointer rounded-full text-xl text-red-500 hover:border-2 hover:border-red-500"})]})]},h))}),e.jsx(N,{position:"top-center",containerClassName:"font-LatoRegular"}),e.jsx(t.Dialog,{size:"md",open:m,handler:f,className:"bg-transparent text-black shadow-none",children:e.jsx(P,{closeModal:f,fetchData:s,genre:x&&x})}),e.jsx(t.Dialog,{size:"md",open:G,handler:v,className:"bg-transparent text-black shadow-none",children:j&&e.jsx(t.DialogBody,{className:"flex items-center justify-center",children:e.jsx(C,{closeModal:L,fetchData:s,deleteId:j,deleteItem:"Genre"})})})]})},Xe=()=>{const[n,r]=c.useState(!1),i=()=>r(l=>!l);return e.jsx(e.Fragment,{children:e.jsxs(D,{children:[e.jsx(F,{currentPage:"genres",user:"admin"}),e.jsxs("div",{className:"text-slate-900 px-4",children:[e.jsxs("div",{className:"flex flex-row items-center justify-between",children:[e.jsx(t.Typography,{variant:"h4",className:"text-xl font-LatoBold capitalize",children:"genres"}),e.jsxs(t.Button,{size:"sm",onClick:i,className:"capitalize rounded-full flex flex-row items-center gap-3 font-LatoRegular bg-gray-800 hover:bg-yellow-300 hover:text-gray-900 transition ease-in-out",children:[e.jsx(k,{className:"text-lg"})," new"]})]}),e.jsx("div",{children:e.jsx("div",{className:"py-2",children:e.jsx(J,{})})})]}),e.jsx(N,{position:"top-center",containerClassName:"font-LatoRegular"}),e.jsx(t.Dialog,{size:"md",open:n,handler:i,className:"bg-transparent shadow-none",children:e.jsx(H,{closeModal:i})})]})})};export{Xe as default};
