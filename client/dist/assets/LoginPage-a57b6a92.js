import{r as l,j as e}from"./react-b72defc1.js";import{r as t}from"./@material-tailwind-31758b72.js";import{I as w,_ as m}from"./react-hot-toast-7c13a961.js";import{a as p}from"./index-8d7f4eaf.js";import{N as y}from"./react-router-dom-66e06988.js";import{e as N}from"./react-router-304b5d03.js";import{P as b}from"./react-spinners-e022d723.js";import{T}from"./TextLogo-b1631671.js";import"./@emotion-dbfef640.js";import"./classnames-63c61219.js";import"./tailwind-merge-4e201461.js";import"./prop-types-1cbc6ab3.js";import"./deepmerge-1a216343.js";import"./tslib-e99c189e.js";import"./hey-listen-e9db0d45.js";import"./style-value-types-86c13b32.js";import"./popmotion-e8151042.js";import"./framesync-409e5dda.js";import"./@motionone-d9be48c4.js";import"./material-ripple-effects-ffa693ae.js";import"./@floating-ui-b9e68a19.js";import"./aria-hidden-318acb9e.js";import"./tabbable-6ab97b54.js";import"./react-dom-c53f0256.js";import"./scheduler-765c72db.js";import"./goober-70b4b9ca.js";import"./tw-elements-ab3535c4.js";import"./axios-28bc18a3.js";import"./react-icons-d4dfe288.js";import"./flowbite-react-8684f89b.js";import"./react-indiana-drag-scroll-6942150b.js";import"./react-hook-form-eb4a3cdd.js";import"./@remix-run-3d0d33fe.js";const C={email:"",password:""},E={email:[],password:[]},L=()=>{var h,j;const[d,o]=l.useState(C),[s,x]=l.useState(""),[r]=l.useState(E),c=N(),u=n=>{const a=n.target.name,i=n.target.value;o(v=>({...v,[a]:i}))},f=async()=>{const{data:n}=await p.get("/user");console.log(n)},g=async n=>{n.preventDefault(),await p.get("https://api.bongomusicawards.co.tz/sanctum/csrf-cookie").then(()=>{window.setTimeout(()=>m.success(e.jsx("p",{className:"capitalize",children:"Authenticating..."})),1e3),p.post("https://api.bongomusicawards.co.tz/login",d).then(a=>{console.log(a);const i=a.data.data.token;p.defaults.headers.common.Authorization=`Bearer ${i}`,console.log("Response:Token "+a.data.data.token),f(),x(a.data.data.role),s=="admin"&&c("/admin/dashboard"),s=="Artist"&&c("/artist/dashboard"),s=="nominator"&&c("/nominator/dashboard"),s=="judge"&&c("/judge/dashboard")}).catch(a=>{a.response.status===422&&console.log(a.response.data.errors)})}).catch(()=>{window.setTimeout(()=>m.error(e.jsx("p",{className:"capitalize",children:"Failed to login...Try again"})),1e3)})};return e.jsxs(e.Fragment,{children:[e.jsx(t.Card,{className:"w-96 shadow-none",children:e.jsxs("form",{onSubmit:g,children:[e.jsx(t.CardHeader,{className:"flex flex-col items-center justify-center shadow-none",children:e.jsx(t.Typography,{className:"self-start pl-2 text-gray-800",children:"Enter account credentials to login."})}),e.jsxs(t.CardBody,{className:"flex flex-col gap-4 my-1",children:[e.jsxs("div",{children:[e.jsx("input",{className:"pl-4 rounded-lg w-full font-LatoRegular border border-gray-500",placeholder:"Enter your Email Address",type:"email",name:"email",onChange:u}),((h=r==null?void 0:r.email)==null?void 0:h.length)>0&&e.jsx("span",{className:"text-red-400 text-sm m-2 p-2",children:r.email[0]})]}),e.jsxs("div",{children:[e.jsx("input",{placeholder:"Enter Your Password",type:"password",name:"password",className:"pl-4 rounded-lg w-full font-LatoRegular border border-gray-500",onChange:u}),((j=r==null?void 0:r.password)==null?void 0:j.length)>0&&e.jsx("span",{className:"text-red-400 text-sm m-2 p-2",children:r.password[0]})]})]}),e.jsxs(t.CardFooter,{className:"pt-0",children:[e.jsx(t.Button,{variant:"gradient",fullWidth:!0,className:"bg-slate-900 hover:bg-yellow-500 transition ease-in-out",onClick:g,children:"Log In"}),e.jsx(y,{to:"/recovery",children:e.jsx(t.Typography,{variant:"small",className:"mt-6 flex justify-center font-LatoRegular transition-all ease-in-out hover:underline hover:underline-offset-4",children:"Forgot Password?"})})]})]})}),e.jsx(w,{position:"top-center"})]})},k=()=>{const[d,o]=l.useState(!1),[s,x]=l.useState(""),[r,c]=l.useState(""),[u,f]=l.useState(""),[g,h]=l.useState(""),j=N(),n=async a=>{a.preventDefault(),o(!0),await p.get("https://api.bongomusicawards.co.tz/sanctum/csrf-cookie").then(()=>{p.post("https://api.bongomusicawards.co.tz/api/artists/register",{first_name:s,last_name:r,email:u,password:g}).then(i=>{console.log(i),window.setTimeout(()=>m.success(e.jsx("p",{className:"capitalize",children:"Registering..."})),2e3),x(""),c(""),f(""),h(""),window.setTimeout(()=>m.success(e.jsx("p",{className:"capitalize",children:"Account Created successful..."})),2e3),o(!1),j("/login")}).catch(i=>{console.log(i),window.setTimeout(()=>m.error(e.jsx("p",{className:"capitalize",children:"Failed to create Account..."})),1e3),o(!1)})}).catch(i=>{console.log(i),window.setTimeout(()=>m.error(e.jsx("p",{className:"capitalize",children:"Failed to Create artist..."})),1e3),o(!1)})};return e.jsxs(t.Card,{className:"shadow-none border-none",children:[e.jsx(t.Typography,{color:"gray",className:"sfont-normal",children:"Enter your details to register."}),e.jsxs("form",{onSubmit:n,className:"mt-8 mb-2 w-80 max-w-screen-lg sm:w-96",children:[e.jsxs("div",{className:"mb-4 flex flex-col gap-6",children:[e.jsx(t.Input,{color:"black",crossOrigin:void 0,value:s,onChange:a=>x(a.target.value),className:"my-1 rounded-md",placeholder:"Enter Your firstname"}),e.jsx(t.Input,{color:"black",crossOrigin:void 0,value:r,onChange:a=>c(a.target.value),className:"my-1 rounded-md",placeholder:"Enter Your lastname"}),e.jsx(t.Input,{color:"black",crossOrigin:void 0,value:u,onChange:a=>f(a.target.value),className:"my-1 rounded-md",placeholder:"Enter Your Email Address",type:"email"}),e.jsx(t.Input,{color:"black",crossOrigin:void 0,value:g,onChange:a=>h(a.target.value),className:"my-1 rounded-md",placeholder:"Enter Your Password",type:"password"})]}),e.jsx(t.Button,{className:"mt-6",fullWidth:!0,onClick:n,children:"Register"}),e.jsx(w,{position:"top-center"}),d&&e.jsx("div",{className:"flex items-center justify-center mt-4",children:e.jsx(b,{color:"#36d7b7"})})]})]})},le=()=>{const d=[{label:"LOGIN",value:"login",desc:e.jsx(L,{})},{label:"REGISTER",value:"register",desc:e.jsx(k,{})}];return e.jsx("section",{className:"px-4 w-full h-screen flex flex-col items-center justify-center bg-white",children:e.jsxs("div",{className:"w-full lg:w-1/2 shadow-none",children:[e.jsx("div",{className:"w-full flex flex-row items-center justify-center my-4",children:e.jsx(y,{to:"/",children:e.jsx(T,{})})}),e.jsxs(t.Tabs,{id:"custom-animation",value:"html",children:[e.jsx(t.TabsHeader,{className:"text-slate-900 bg-gradient-to-r from-yellow-400 to-white",children:d.map(({label:o,value:s})=>e.jsx(t.Tab,{value:s,className:"hover:bg-white hover:rounded-md",children:o},s))}),e.jsx(t.TabsBody,{animate:{initial:{y:250},mount:{y:0},unmount:{y:250}},children:d.map(({value:o,desc:s})=>e.jsx(t.TabPanel,{value:o,className:"flex items-center justify-center",children:s},o))})]})]})})};export{le as default};
