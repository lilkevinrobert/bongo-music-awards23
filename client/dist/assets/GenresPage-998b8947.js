import{r as i,j as e}from"./react-b72defc1.js";import{r as s}from"./@material-tailwind-31758b72.js";import{L as z}from"./index-5a6274d4.js";import{U as I,V as N,W as B,X as L,Y as A,S as E,r as M,Z as $}from"./react-icons-bf445ee6.js";import{F as R,A as W}from"./FetchingItems-aa099e2d.js";import{I as w,_ as u}from"./react-hot-toast-7c13a961.js";import"./@emotion-dbfef640.js";import"./classnames-63c61219.js";import"./tailwind-merge-4e201461.js";import"./prop-types-1cbc6ab3.js";import"./deepmerge-1a216343.js";import"./tslib-e99c189e.js";import"./hey-listen-e9db0d45.js";import"./style-value-types-86c13b32.js";import"./popmotion-e8151042.js";import"./framesync-409e5dda.js";import"./@motionone-d9be48c4.js";import"./material-ripple-effects-ffa693ae.js";import"./@floating-ui-b9e68a19.js";import"./aria-hidden-318acb9e.js";import"./tabbable-6ab97b54.js";import"./react-dom-c53f0256.js";import"./scheduler-765c72db.js";import"./tw-elements-ab3535c4.js";import"./react-router-dom-4c4fad71.js";import"./react-router-c4d8086b.js";import"./@remix-run-3d0d33fe.js";import"./axios-28bc18a3.js";import"./flowbite-react-4f06fe84.js";import"./react-indiana-drag-scroll-6942150b.js";import"./goober-70b4b9ca.js";const _=({id:l,name:d})=>{const m="https://api.bongomusicawards.co.tz/api",[p,g]=i.useState(!1),n=()=>g(o=>!o);function x(){fetch(`${m}/genres/${l}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({genreId:l})}),n(),u.success(e.jsx("p",{className:"capitalize",children:"Genre Deleted Successfully!"})),window.setTimeout(()=>window.location.reload(),2e3)}return e.jsxs(e.Fragment,{children:[e.jsx(s.Card,{className:"group w-full h-32 rounded-md cursor-pointer hover:bg-slate-100",children:e.jsxs(s.CardBody,{className:"flex flex-row items-center justify-center gap-4",children:[e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[e.jsx(I,{className:"sm:w-8 sm:h-8 lg:w-20 lg:h-16"}),e.jsx(s.Typography,{variant:"h6",color:"blue-gray",className:"mb-2 capitalize",children:d})]}),e.jsx(N,{onClick:n,className:"hidden group-hover:block group-transition-all group-ease-in-out w-14 h-10 rounded-md cursor-pointer transition ease-in-out text-red-400 hover:bg-red-500 hover:text-white"})]})}),e.jsx(w,{position:"top-center"}),e.jsx(s.Dialog,{size:"xs",open:p,handler:n,className:"bg-transparent shadow-none py-24 ",animate:{mount:{scale:1,y:0},unmount:{scale:.9,y:-100}},children:e.jsxs(s.Card,{className:"mx-auto w-full max-w-[24rem] p-4 rounded-md",children:[e.jsxs(s.DialogHeader,{className:"flex flex-row items-center justify-between",children:[e.jsx(s.Typography,{variant:"h5",children:" Genre Delete"}),e.jsx(B,{className:"w-8 h-8 hover:cursor-pointer hover:bg-gray-100 rounded-md",onClick:n})]}),e.jsx(s.DialogBody,{className:"capitalize flex flex-row items-start justify-center",children:e.jsxs(s.Typography,{className:"flex items-center gap-4",children:[e.jsx(L,{className:"w-8 h-8 text-yellow-400"}),e.jsx("p",{className:"capitalize",children:"This action is irreversible."})]})}),e.jsx(s.DialogFooter,{className:"flex items-center justify-center",children:e.jsxs(s.Button,{variant:"gradient",className:"flex items-center justify-center gap-2 bg-red-400 hover:bg-red-600 transition ease-in-out",onClick:x,children:[e.jsx(A,{className:"w-8 h-8"}),e.jsx("span",{children:"yes, delete!"})]})})]})})]})},H={genreName:"",categories:[{categoryName:""}]},be=()=>{const l="https://api.bongomusicawards.co.tz/api",[d,m]=i.useState(!0),[p,g]=i.useState([]),[n,x]=i.useState(H),[o,h]=i.useState([""]),[j,b]=i.useState(!1),c=()=>{h([""]),b(!j)};i.useEffect(()=>{const t=F();console.log(t);const r={Authorization:`Bearer ${t}`,"Content-Type":"application/json"};fetch(`${l}/admin/genres`,{method:"GET",headers:r}).then(a=>a.json()).then(a=>{a.length==0?m(!1):(m(!1),g(a))})},[l,d]);const C=t=>{x({...n,genreName:t.target.value})},v=()=>{h([...o,""])},D=(t,r)=>{const a=[...o];a[t]=r.target.value,h(a)},G=(t,r)=>{r.preventDefault();const a=[...o];a.splice(t,1),h(a)},S=t=>t.map(a=>({categoryName:a})),T=t=>t.filter(a=>a.categoryName.trim()!=="");function O(t){t.preventDefault();const r=S(o),a=[...n.categories,...r],k=T(a),y={genreName:n.genreName,categories:k};y==null?(c(),u.error(e.jsx("p",{className:"capitalize",children:"All fields are required"}))):(fetch(`${l}/genres/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)}).then(f=>f.json()).then(f=>{f?(u.success(e.jsx("p",{className:"capitalize",children:"Genre Added Successfully"})),window.setTimeout(()=>window.location.reload(),2e3)):u.error(e.jsx("p",{className:"capitalize",children:"Operation Failed!"}))}),c())}function F(){try{const t=localStorage.getItem("bmawards");if(t!==null)return JSON.parse(t)||{}}catch(t){return console.error("Error parsing data from local storage:",t),{}}}return e.jsxs(e.Fragment,{children:[e.jsxs(z,{children:[e.jsx("div",{className:"w-full text-black flex flex-row",children:e.jsxs("section",{className:"w-full pt-8 px-8 min-h-screen bg-slate-300 bg-clip-padding backdrop-filter backdrop-blur-sm bg-opacity-10 scroll-m-10",children:[e.jsx("div",{className:"px-0",children:e.jsxs("div",{className:"flex flex-row items-center justify-between",children:[e.jsx(s.Typography,{variant:"h5",className:"",children:"Genres"}),e.jsxs(s.Button,{className:"flex items-center gap-2 bg-yellow-400",onClick:c,children:[e.jsx(E,{className:"w-4 h-4 text-slate-50"}),e.jsx(s.Typography,{className:"text-sm font-LatoRegular",children:"Add Genre"})]})]})}),e.jsx("div",{className:"w-full h-auto my-4 flex items-center justify-center",children:d===!0?e.jsx(R,{}):p.length>0?e.jsx("div",{className:"w-full h-full grid grid-cols-4 gap-2 py-4",children:p.map(t=>{const r=t.id,a=t.genreName;return e.jsx(_,{id:r,name:a},r)})}):e.jsx(W,{itemName:"genre"})})]})}),e.jsx(w,{position:"top-center"})]}),e.jsx(s.Dialog,{size:"xs",open:j,handler:c,className:"bg-transparent shadow-none py-24",animate:{mount:{scale:1,y:0},unmount:{scale:.9,y:-100}},children:e.jsxs(s.Card,{className:"mx-auto w-full max-w-[24rem] rounded-md",children:[e.jsxs(s.CardHeader,{className:"bg-transparent shadow-none flex items-center justify-between py-4",children:[e.jsx(s.Typography,{variant:"h4",color:"blue-gray",children:"New Genre"}),e.jsx(M,{className:"w-8 h-8 cursor-pointer transition ease-in-out hover:bg-slate-200 hover:rounded-md",onClick:c})]}),e.jsxs("form",{children:[e.jsxs(s.CardBody,{className:"flex flex-col gap-4 border py-4",children:[e.jsx(s.Typography,{className:"-mb-2 font-LatoBold",children:"Name"}),e.jsx(s.Input,{size:"lg",crossOrigin:void 0,name:"genreName",onChange:C}),e.jsx(s.Typography,{className:"font-LatoBold",children:"Categories"}),o.map((t,r)=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(s.Input,{type:"text",value:t,size:"lg",className:"w-3/3",onChange:a=>{D(r,a)},crossOrigin:void 0}),e.jsx(s.Button,{onClick:a=>G(r,a),className:"bg-slate-600",children:e.jsx(N,{className:"w-6 h-6"})})]},r)),e.jsx($,{className:"w-8 h-8 text-slate-500 cursor-pointer rounded-md transition ease-in-out hover:bg-slate-200",onClick:v})]}),e.jsx(s.CardFooter,{className:"pt-4",children:o.length<1?e.jsx(s.Button,{variant:"gradient",onClick:c,fullWidth:!0,disabled:!0,className:"bg-yellow-400 rounded-md",children:"Create Genre"}):e.jsx(s.Button,{variant:"gradient",fullWidth:!0,className:"bg-yellow-400 rounded-md",onClick:O,children:"Create Genre"})})]})]})})]})};export{be as default};
