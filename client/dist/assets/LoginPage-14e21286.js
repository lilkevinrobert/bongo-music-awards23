import{r as l,j as e}from"./react-b2e82637.js";import{r as s}from"./@material-tailwind-afa50add.js";import{I as w,_ as m}from"./react-hot-toast-06a3b5b6.js";import{a as p}from"./index-f8992d48.js";import{N}from"./react-router-dom-612f81c8.js";import{e as y}from"./react-router-fd5cd91a.js";import{P as b}from"./react-spinners-110751f0.js";import"./@emotion-a47f5506.js";import"./classnames-63c61219.js";import"./tailwind-merge-4e201461.js";import"./prop-types-387d7a00.js";import"./deepmerge-1a216343.js";import"./tslib-364d82a0.js";import"./hey-listen-182987e5.js";import"./style-value-types-86c13b32.js";import"./popmotion-54532aa8.js";import"./framesync-409e5dda.js";import"./@motionone-b992d625.js";import"./material-ripple-effects-ffa693ae.js";import"./@floating-ui-d8ef0372.js";import"./aria-hidden-318acb9e.js";import"./tabbable-6ab97b54.js";import"./react-dom-53265323.js";import"./scheduler-765c72db.js";import"./goober-70b4b9ca.js";import"./tw-elements-ab3535c4.js";import"./axios-28bc18a3.js";import"./react-icons-a33cfcf6.js";import"./flowbite-react-767da4d2.js";import"./react-indiana-drag-scroll-45a13ea1.js";import"./@remix-run-3d0d33fe.js";const T={email:"",password:""},k={email:[],password:[]},C=()=>{var g,j;const[d,o]=l.useState(T),[t,x]=l.useState(""),[r]=l.useState(k),c=y(),u=n=>{const a=n.target.name,i=n.target.value;o(v=>({...v,[a]:i}))},f=async()=>{const{data:n}=await p.get("/user");console.log(n)},h=async n=>{n.preventDefault(),await p.get("https://api.bongomusicawards.co.tz/sanctum/csrf-cookie").then(()=>{window.setTimeout(()=>m.success(e.jsx("p",{className:"capitalize",children:"Authenticating..."})),1e3),p.post("https://api.bongomusicawards.co.tz/login",d).then(a=>{console.log(a);const i=a.data.data.token;p.defaults.headers.common.Authorization=`Bearer ${i}`,console.log("Response:Token "+a.data.data.token),f(),x(a.data.data.role),t=="admin"&&c("/admin/dashboard"),t=="Artist"&&c("/artist/dashboard"),t=="nominator"&&c("/nominator/dashboard"),t=="judge"&&c("/judge/dashboard")}).catch(a=>{a.response.status===422&&console.log(a.response.data.errors)})}).catch(()=>{window.setTimeout(()=>m.error(e.jsx("p",{className:"capitalize",children:"Failed to login...Try again"})),1e3)})};return e.jsxs(e.Fragment,{children:[e.jsx(s.Card,{className:"w-96 shadow-none",children:e.jsxs("form",{onSubmit:h,children:[e.jsx(s.CardHeader,{className:"flex flex-col items-center justify-center shadow-none",children:e.jsx(s.Typography,{className:"self-start pl-2",children:"Enter account credentials to login."})}),e.jsxs(s.CardBody,{className:"flex flex-col gap-4 my-2",children:[e.jsxs("div",{children:[e.jsx(s.Input,{color:"black",crossOrigin:void 0,className:"my-1 rounded-md",placeholder:"Enter Your Email Address",type:"email",name:"email",onChange:u}),((g=r==null?void 0:r.email)==null?void 0:g.length)>0&&e.jsx("span",{className:"text-red-400 text-sm m-2 p-2",children:r.email[0]})]}),e.jsxs("div",{children:[e.jsx(s.Input,{color:"black",crossOrigin:void 0,className:"my-1 rounded-md",placeholder:"Enter Your Password",type:"password",name:"password",onChange:u}),((j=r==null?void 0:r.password)==null?void 0:j.length)>0&&e.jsx("span",{className:"text-red-400 text-sm m-2 p-2",children:r.password[0]})]})]}),e.jsxs(s.CardFooter,{className:"pt-0",children:[e.jsx(s.Button,{variant:"gradient",fullWidth:!0,className:"bg-slate-900 hover:bg-yellow-400 transition ease-in-out",onClick:h,children:"Log In"}),e.jsx(N,{to:"/recovery",children:e.jsx(s.Typography,{variant:"small",className:"mt-6 flex justify-center transition-all ease-in-out hover:underline hover:underline-offset-4",children:"Forgot Password?"})})]})]})}),e.jsx(w,{position:"top-center"})]})},E=()=>{const[d,o]=l.useState(!1),[t,x]=l.useState(""),[r,c]=l.useState(""),[u,f]=l.useState(""),[h,g]=l.useState(""),j=y(),n=async a=>{a.preventDefault(),o(!0),await p.get("https://api.bongomusicawards.co.tz/sanctum/csrf-cookie").then(()=>{p.post("https://api.bongomusicawards.co.tz/api/artists/register",{first_name:t,last_name:r,email:u,password:h}).then(i=>{console.log(i),window.setTimeout(()=>m.success(e.jsx("p",{className:"capitalize",children:"Registering..."})),2e3),x(""),c(""),f(""),g(""),window.setTimeout(()=>m.success(e.jsx("p",{className:"capitalize",children:"Account Created successful..."})),2e3),o(!1),j("/login")}).catch(i=>{console.log(i),window.setTimeout(()=>m.error(e.jsx("p",{className:"capitalize",children:"Failed to create Account..."})),1e3),o(!1)})}).catch(i=>{console.log(i),window.setTimeout(()=>m.error(e.jsx("p",{className:"capitalize",children:"Failed to Create artist..."})),1e3),o(!1)})};return e.jsxs(s.Card,{className:"shadow-none border-none",children:[e.jsx(s.Typography,{color:"gray",className:"sfont-normal",children:"Enter your details to register."}),e.jsxs("form",{onSubmit:n,className:"mt-8 mb-2 w-80 max-w-screen-lg sm:w-96",children:[e.jsxs("div",{className:"mb-4 flex flex-col gap-6",children:[e.jsx(s.Input,{color:"black",crossOrigin:void 0,value:t,onChange:a=>x(a.target.value),className:"my-1 rounded-md",placeholder:"Enter Your firstname"}),e.jsx(s.Input,{color:"black",crossOrigin:void 0,value:r,onChange:a=>c(a.target.value),className:"my-1 rounded-md",placeholder:"Enter Your lastname"}),e.jsx(s.Input,{color:"black",crossOrigin:void 0,value:u,onChange:a=>f(a.target.value),className:"my-1 rounded-md",placeholder:"Enter Your Email Address",type:"email"}),e.jsx(s.Input,{color:"black",crossOrigin:void 0,value:h,onChange:a=>g(a.target.value),className:"my-1 rounded-md",placeholder:"Enter Your Password",type:"password"})]}),e.jsx(s.Button,{className:"mt-6",fullWidth:!0,onClick:n,children:"Register"}),e.jsx(w,{position:"top-center"}),d&&e.jsx("div",{className:"flex items-center justify-center mt-4",children:e.jsx(b,{color:"#36d7b7"})})]})]})},re=()=>{const d=[{label:"LOGIN",value:"login",desc:e.jsx(C,{})},{label:"REGISTER",value:"register",desc:e.jsx(E,{})}];return e.jsx("section",{className:"px-4 w-full h-screen flex flex-col items-center justify-center bg-white",children:e.jsxs("div",{className:"w-full lg:w-1/2 shadow-none",children:[e.jsx("div",{className:"w-full flex flex-row items-center justify-center my-4",children:e.jsx(s.Typography,{variant:"h4",className:"text-slate-900 capitalize",children:"Bongo music Awards"})}),e.jsxs(s.Tabs,{id:"custom-animation",value:"html",children:[e.jsx(s.TabsHeader,{className:"text-slate-900 bg-gradient-to-r from-yellow-400 to-white",children:d.map(({label:o,value:t})=>e.jsx(s.Tab,{value:t,className:"hover:bg-white hover:rounded-md",children:o},t))}),e.jsx(s.TabsBody,{animate:{initial:{y:250},mount:{y:0},unmount:{y:250}},children:d.map(({value:o,desc:t})=>e.jsx(s.TabPanel,{value:o,className:"flex items-center justify-center",children:t},o))})]})]})})};export{re as default};
