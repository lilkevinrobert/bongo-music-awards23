import{r as l,j as e}from"./react-b72defc1.js";import{u as B,h as D,e as E,f as z,D as S,b as C,B as F,i as I}from"./index-a3256d5a.js";import{r}from"./@material-tailwind-31758b72.js";import{ag as A,aI as k,ah as R,ab as O}from"./react-icons-4f9f09c8.js";import{a as U}from"./axios-28bc18a3.js";import{_ as h,I as b}from"./react-hot-toast-7c13a961.js";import"./@emotion-dbfef640.js";import"./react-dom-c53f0256.js";import"./scheduler-765c72db.js";import"./tw-elements-ab3535c4.js";import"./react-router-dom-fc96d914.js";import"./react-router-1941b8c8.js";import"./@remix-run-3d0d33fe.js";import"./react-hook-form-592090e6.js";import"./react-spinners-4d5ffb55.js";import"./@hookform-8062e1fd.js";import"./yup-c8f01269.js";import"./property-expr-38205fa5.js";import"./tiny-case-d0726479.js";import"./toposort-dff2028e.js";import"./flowbite-react-631d9281.js";import"./react-indiana-drag-scroll-6942150b.js";import"./@floating-ui-b9e68a19.js";import"./aria-hidden-318acb9e.js";import"./tabbable-6ab97b54.js";import"./recharts-b436783c.js";import"./clsx-0839fdbe.js";import"./lodash-36a35ae7.js";import"./react-smooth-ce808070.js";import"./prop-types-1cbc6ab3.js";import"./fast-equals-a0711cdd.js";import"./tiny-invariant-dd7d57d2.js";import"./d3-shape-9e788a4f.js";import"./d3-path-41c4cb36.js";import"./victory-vendor-5e3e398c.js";import"./d3-scale-4cce9527.js";import"./internmap-7949acc8.js";import"./d3-array-7d9b19f9.js";import"./d3-time-format-aa787c71.js";import"./d3-time-9ce187c0.js";import"./d3-interpolate-8fa1f6ff.js";import"./d3-color-6502c434.js";import"./d3-format-ffdb8652.js";import"./recharts-scale-170b47f7.js";import"./decimal.js-light-6fe16ef2.js";import"./eventemitter3-5051c9e6.js";import"./classnames-63c61219.js";import"./tailwind-merge-4e201461.js";import"./deepmerge-1a216343.js";import"./tslib-e99c189e.js";import"./hey-listen-e9db0d45.js";import"./style-value-types-86c13b32.js";import"./popmotion-e8151042.js";import"./framesync-409e5dda.js";import"./@motionone-d9be48c4.js";import"./material-ripple-effects-ffa693ae.js";import"./goober-70b4b9ca.js";const _=({closeModal:d,fetchData:o,genre:i})=>{const n="https://api.bongomusicawards.co.tz/api/v1",[a,f]=l.useState(i),g=s=>{const{name:m,value:x}=s.target;f(u=>({...u,[m]:x}))},c=s=>{s.preventDefault(),d(),U.patch(`${n}/genres/${a==null?void 0:a.id}`,{name:a==null?void 0:a.name}).then(m=>{m.status==200?(o(),h.success("Genre Updated Successfully")):h.error("Failed to Update Genre.")}).catch(()=>{h.error("Failed to Update Genre.")})};return e.jsx(r.Card,{className:"mx-auto w-full max-w-[24rem] rounded-md",children:e.jsxs("form",{onSubmit:s=>c(s),children:[e.jsx(r.CardHeader,{className:"px-2 py-4 shadow-none",children:e.jsx(r.Typography,{variant:"h4",className:"font-LatoBold text-2xl capitalize text-gray-900",children:"Edit Genre"})}),e.jsx(r.CardBody,{className:"flex flex-col gap-4",children:e.jsxs("div",{className:"flex flex-col items-start gap-2 font-LatoBold text-gray-900",children:[e.jsx(r.Typography,{className:"capitalize",children:"name"}),e.jsx("input",{type:"text",value:a==null?void 0:a.name,name:"name",className:"h-[2rem] w-full rounded border-gray-300 font-LatoRegular text-sm",placeholder:"Name of Genre",onChange:s=>g(s),required:!0})]})}),e.jsxs(r.CardFooter,{className:"flex flex-row items-center justify-end gap-1",children:[e.jsx(r.Button,{size:"md",onClick:d,className:"rounded-full bg-transparent font-LatoBold capitalize text-gray-900 shadow-none transition ease-in-out hover:bg-gray-200",children:"cancel"}),e.jsx(r.Button,{type:"submit",size:"md",className:"rounded-full font-LatoRegular capitalize transition ease-in-out hover:bg-yellow-300 hover:font-LatoBold hover:text-gray-900",children:"save changes"})]})]})})},T=()=>{const d="https://api.bongomusicawards.co.tz/api/v1",{data:o,loading:i,error:n,fetchData:a}=B(`${d}/genres`),[f,g]=l.useState(null),[c,s]=l.useState(null),[m,x]=l.useState(!1),u=()=>x(t=>!t),N=t=>{s(t),t.id&&g(t.id),x(p=>!p)},[j,w]=l.useState(""),[G,y]=l.useState(!1),L=()=>y(t=>!t),v=t=>{t&&w(t),y(p=>!p)};return e.jsxs(e.Fragment,{children:[i?e.jsx(D,{}):n?e.jsx(E,{errorName:n.name,message:n.message}):(o==null?void 0:o.data.length)===0?e.jsx(z,{itemName:"genre"}):e.jsx("div",{className:"flex flex-row flex-wrap gap-2 py-2",children:o==null?void 0:o.data.map((t,p)=>e.jsxs("div",{className:"relative group flex items-center justify-between gap-2 font-LatoBold text-xs text-gray-800 hover:text-gray-50 uppercase bg-amber-100 hover:bg-gray-800 transition ease-linear w-fit px-4 py-2 rounded-full",children:[e.jsx(A,{className:"text-lg text-gray-700 group-hover:text-gray-50 transition ease-linear"}),t.name,e.jsxs("div",{className:"invisible group-hover:visible transition-opacity duration-300 opacity-0 group-hover:opacity-100 flex flex-row items-center gap-2 bg-amber-50 px-2 rounded-full",children:[e.jsx(k,{onClick:()=>N(t),className:"cursor-pointer rounded-full text-lg text-green-500 hover:border-2 hover:border-green-500"}),e.jsx(R,{onClick:()=>v(t.id),className:"cursor-pointer rounded-full text-xl text-red-500 hover:border-2 hover:border-red-500"})]})]},p))}),e.jsx(b,{position:"top-center",containerClassName:"font-LatoRegular",toastOptions:{duration:5e3,style:{background:"#333",color:"#fff"}}}),e.jsx(r.Dialog,{size:"md",open:m,handler:u,className:"bg-transparent text-black shadow-none",children:e.jsx(_,{closeModal:u,fetchData:a,genre:c&&c})}),e.jsx(r.Dialog,{size:"md",open:G,handler:v,className:"bg-transparent text-black shadow-none",children:j&&e.jsx(r.DialogBody,{className:"flex items-center justify-center",children:e.jsx(S,{closeModal:L,fetchData:a,deleteId:j,deleteItem:"Genre"})})})]})},Pe=()=>{const[d,o]=l.useState(!1),i=()=>o(n=>!n);return e.jsx(e.Fragment,{children:e.jsxs(C,{children:[e.jsx(F,{currentPage:"genres",user:"admin"}),e.jsxs("div",{className:"text-slate-900 px-4",children:[e.jsxs("div",{className:"flex flex-row items-center justify-between",children:[e.jsx(r.Typography,{variant:"h4",className:"text-xl font-LatoBold capitalize",children:"genres"}),e.jsxs(r.Button,{size:"sm",onClick:i,className:"capitalize rounded-full flex flex-row items-center gap-3 font-LatoRegular bg-gray-800 hover:bg-yellow-300 hover:text-gray-900 transition ease-in-out",children:[e.jsx(O,{className:"text-lg"})," new"]})]}),e.jsx("div",{children:e.jsx("div",{className:"py-2",children:e.jsx(T,{})})})]}),e.jsx(b,{position:"top-center",containerClassName:"font-LatoRegular",toastOptions:{duration:5e3,style:{background:"#333",color:"#fff"}}}),e.jsx(r.Dialog,{size:"md",open:d,handler:i,className:"bg-transparent shadow-none",children:e.jsx(I,{closeModal:i})})]})})};export{Pe as default};
