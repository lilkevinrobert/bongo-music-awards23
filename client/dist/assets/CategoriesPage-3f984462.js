import{r as o,j as e}from"./react-42299c7e.js";import{u as F,d as R,e as I,D as O,b as G,B as T,f as _}from"./index-462d9aa6.js";import{r as t}from"./@material-tailwind-51196814.js";import{aD as H,aE as U,aF as $,aG as M,ab as P}from"./react-icons-2e0713cf.js";import{_ as j,I as q}from"./react-hot-toast-d0997438.js";import{a as W}from"./axios-28bc18a3.js";import"./@emotion-77b6f936.js";import"./hoist-non-react-statics-3f8ebaa8.js";import"./stylis-79144faa.js";import"./react-dom-048d7870.js";import"./scheduler-765c72db.js";import"./tw-elements-ab3535c4.js";import"./react-router-dom-5d85cc12.js";import"./react-router-f88b4d72.js";import"./@remix-run-3d0d33fe.js";import"./react-hook-form-4cd63ca9.js";import"./react-spinners-c0343eec.js";import"./@hookform-f8da240d.js";import"./yup-f927965e.js";import"./property-expr-38205fa5.js";import"./tiny-case-d0726479.js";import"./toposort-f45221c2.js";import"./flowbite-react-f3b9ab21.js";import"./react-indiana-drag-scroll-9bd84ebc.js";import"./@floating-ui-043950a6.js";import"./aria-hidden-318acb9e.js";import"./tabbable-6ab97b54.js";import"./recharts-96e6358a.js";import"./clsx-0839fdbe.js";import"./lodash-431f3ad9.js";import"./react-smooth-9290ff5a.js";import"./prop-types-214975d0.js";import"./fast-equals-a0711cdd.js";import"./tiny-invariant-dd7d57d2.js";import"./d3-shape-9e788a4f.js";import"./d3-path-41c4cb36.js";import"./victory-vendor-5e3e398c.js";import"./d3-scale-4cce9527.js";import"./internmap-7949acc8.js";import"./d3-array-7d9b19f9.js";import"./d3-time-format-aa787c71.js";import"./d3-time-9ce187c0.js";import"./d3-interpolate-8fa1f6ff.js";import"./d3-color-6502c434.js";import"./d3-format-ffdb8652.js";import"./recharts-scale-170b47f7.js";import"./decimal.js-light-6fe16ef2.js";import"./eventemitter3-1889e38f.js";import"./react-select-4d11b4a9.js";import"./@babel-f7e36326.js";import"./use-isomorphic-layout-effect-d981c202.js";import"./memoize-one-297ddbcb.js";import"./classnames-63c61219.js";import"./tailwind-merge-4e201461.js";import"./deepmerge-1a216343.js";import"./tslib-6a347b90.js";import"./hey-listen-66a99c0f.js";import"./style-value-types-86c13b32.js";import"./popmotion-3524bc3a.js";import"./framesync-409e5dda.js";import"./@motionone-1a46d15a.js";import"./material-ripple-effects-ffa693ae.js";import"./goober-70b4b9ca.js";const J=({closeModal:i,genre:r,categoryGenre:d,fetchData:m})=>{const x="https://api.bongomusicawards.co.tz/api/v1",[s,y]=o.useState(r),g=l=>{const{name:c,value:u}=l.target;y(f=>({...f,[c]:u}))},h=l=>{l.preventDefault(),i(),W.patch(`${x}/categories/${s==null?void 0:s.id}`,{name:s==null?void 0:s.name}).then(c=>{c.status==200?(m(),j.success("Category Updated Successfully")):j.error("Failed to Update Category.")}).catch(()=>{j.error("Failed to Update Category.")})};return e.jsx(t.Card,{className:"mx-auto w-full max-w-[24rem] rounded-md",children:e.jsxs("form",{onSubmit:l=>h(l),children:[e.jsxs(t.CardHeader,{className:"shadow-none pt-4 px-2",children:[e.jsx(t.Typography,{variant:"h4",className:"text-2xl capitalize font-LatoBold text-gray-900",children:"Edit Category"}),e.jsxs("div",{className:"text-sm text-gray-800 flex items-center capitalize",children:[e.jsx(H,{className:"text-2xl"}),e.jsxs(t.Typography,{className:"bg-yellow-200 px-4 py-1 rounded-r-full font-LatoRegular",children:["in ~ ",`${d}`]})]})]}),e.jsx(t.CardBody,{className:"flex flex-col gap-4",children:e.jsxs("div",{className:"flex flex-col items-start gap-2 font-LatoBold text-gray-900",children:[e.jsx(t.Typography,{className:"capitalize",children:"name"}),e.jsx("input",{type:"text",name:"name",value:s==null?void 0:s.name,className:"w-full h-[2rem] border-gray-300 font-LatoRegular text-sm rounded",placeholder:"Name of Sponsor",onChange:l=>g(l),required:!0})]})}),e.jsxs(t.CardFooter,{className:"flex flex-row items-center justify-end gap-1",children:[e.jsx(t.Button,{size:"md",onClick:i,className:"capitalize text-gray-900 shadow-none bg-transparent hover:bg-gray-200 transition ease-in-out font-LatoBold rounded-full",children:"cancel"}),e.jsx(t.Button,{type:"submit",size:"md",className:"capitalize hover:text-gray-900 hover:bg-yellow-300 transition ease-in-out font-LatoRegular hover:font-LatoBold rounded-full",children:"save changes"})]})]})})},K=()=>e.jsx("div",{className:"my-2 animate-pulse",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"w-full h-10 rounded bg-slate-200 shadow-sm"}),e.jsx("div",{className:"w-full h-10 rounded bg-slate-200 shadow-sm"}),e.jsx("div",{className:"w-full h-10 rounded bg-slate-200 shadow-sm"}),e.jsx("div",{className:"w-full h-10 rounded bg-slate-200 shadow-sm"}),e.jsx("div",{className:"w-full h-10 rounded bg-slate-200 shadow-sm"}),e.jsx("div",{className:"w-full h-10 rounded bg-slate-200 shadow-sm"}),e.jsx("div",{className:"w-full h-10 rounded bg-slate-200 shadow-sm"}),e.jsx("div",{className:"w-full h-10 rounded bg-slate-200 shadow-sm"}),e.jsx("div",{className:"w-full h-10 rounded bg-slate-200 shadow-sm"})]})}),Q=({open:i})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:`${i?"rotate-180":""} mr-2 h-5 w-5 text-gray-600 transition-transform`,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})}),V=()=>{const i="https://api.bongomusicawards.co.tz/api/v1",{data:r,loading:d,error:m,fetchData:x}=F(`${i}/genres/category/all`),[s,y]=o.useState([]),[g,h]=o.useState(!0),l=()=>h(a=>!a),[c,u]=o.useState(""),[f,w]=o.useState(!1),B=()=>w(a=>!a),v=a=>{a&&u(a),w(n=>!n)},[X,S]=o.useState(null),[b,z]=o.useState(""),[N,E]=o.useState(null),[D,C]=o.useState(!1),L=()=>C(a=>!a),A=(a,n)=>{E(n),a&&n&&(S(n.id),z(a)),C(p=>!p)};return e.jsxs(e.Fragment,{children:[d?e.jsx(K,{}):m?e.jsx(R,{errorName:m.name,message:m.message}):(r==null?void 0:r.data.length)===0?e.jsx(I,{itemName:"category"}):e.jsx("div",{children:r==null?void 0:r.data.map((a,n)=>e.jsxs(t.Accordion,{title:a.name,open:g,icon:e.jsx(Q,{open:s.includes(n+1)}),className:"bg-transparent transition ease-linear hover:bg-yellow-50",children:[e.jsx(t.AccordionHeader,{onClick:l,children:e.jsxs(t.Typography,{variant:"h6",className:"border-2 border-transparent border-l-yellow-300 border-r-transparent pl-2 font-LatoBold capitalize text-gray-800",children:["in - ",a.name," ",e.jsx("span",{className:"pl-2 font-LatoBold text-xs text-gray-400",children:"genre"})]})}),e.jsxs(t.AccordionBody,{className:"flex flex-row flex-wrap items-center gap-2 bg-white",children:[a.categories&&a.categories.map((p,k)=>e.jsxs("div",{className:"group relative flex w-fit items-center justify-between gap-2 rounded-full bg-amber-100 px-4 py-2 font-LatoBold text-xs uppercase text-gray-800 transition ease-linear hover:bg-gray-800 hover:text-gray-50",children:[e.jsx(U,{className:"text-lg text-gray-700 transition ease-linear group-hover:text-gray-50"}),p.name,e.jsxs("div",{className:"invisible flex flex-row items-center gap-2 rounded-full bg-amber-50 px-2 opacity-0 transition-opacity duration-300 group-hover:visible group-hover:opacity-100",children:[e.jsx($,{onClick:()=>A(a.name,p),className:"cursor-pointer rounded-full text-xl text-green-500 hover:border-2 hover:border-green-500"}),e.jsx(M,{onClick:()=>v(p.id),className:"cursor-pointer rounded-full text-2xl text-red-500 hover:border-2 hover:border-red-500"})]})]},k)),a.categories.length==0&&e.jsx("div",{className:"w-full text-center font-LatoRegular text-base capitalize text-gray-900",children:e.jsx("span",{className:"rounded-full bg-yellow-100 px-4 py-2",children:"no categories found."})})]})]},n))}),e.jsx(t.Dialog,{size:"md",open:f,handler:v,className:"bg-transparent text-black shadow-none",children:c&&e.jsx(t.DialogBody,{className:"flex items-center justify-center",children:e.jsx(O,{closeModal:B,fetchData:x,deleteId:c,deleteItem:"Category"})})}),e.jsx(t.Dialog,{size:"md",open:D,handler:L,className:"bg-transparent text-black shadow-none",children:e.jsx(J,{closeModal:L,fetchData:x,genre:N&&N,categoryGenre:b&&b})})]})},it=()=>{const[i,r]=o.useState(!1),d=()=>r(m=>!m);return e.jsx(e.Fragment,{children:e.jsxs(G,{children:[e.jsx(T,{currentPage:"categories",user:"admin"}),e.jsxs("div",{className:"text-slate-900 px-4",children:[e.jsxs("div",{className:"flex flex-row items-center justify-between",children:[e.jsx(t.Typography,{variant:"h4",className:"text-xl font-LatoBold capitalize",children:"Categories"}),e.jsxs(t.Button,{size:"sm",onClick:d,className:"capitalize rounded-full flex flex-row items-center gap-3 font-LatoRegular bg-gray-800 hover:bg-yellow-300 hover:text-gray-900 transition ease-in-out",children:[e.jsx(P,{className:"text-lg"})," new"]})]}),e.jsx("div",{children:e.jsx("div",{className:"py-2",children:e.jsx(V,{})})})]}),e.jsx(q,{position:"top-center",containerClassName:"font-LatoRegular"}),e.jsx(t.Dialog,{size:"md",open:i,handler:d,className:"bg-transparent shadow-none",children:e.jsx(_,{closeModal:d})})]})})};export{it as default};
