import{r as y,j as e}from"./react-b72defc1.js";import{r as t}from"./@material-tailwind-31758b72.js";import{I as N,_ as m}from"./react-hot-toast-7c13a961.js";import{a as x,E as w,T as L,L as R}from"./index-f2bf5920.js";import{N as v}from"./react-router-dom-fc96d914.js";import{e as T}from"./react-router-1941b8c8.js";import{u as F}from"./react-hook-form-592090e6.js";import{o as B}from"./@hookform-8062e1fd.js";import{c as E,a as j,e as $}from"./yup-c8f01269.js";import{a as C}from"./axios-28bc18a3.js";import{B as k}from"./react-spinners-4d5ffb55.js";import"./@emotion-dbfef640.js";import"./classnames-63c61219.js";import"./tailwind-merge-4e201461.js";import"./prop-types-1cbc6ab3.js";import"./deepmerge-1a216343.js";import"./tslib-e99c189e.js";import"./hey-listen-e9db0d45.js";import"./style-value-types-86c13b32.js";import"./popmotion-e8151042.js";import"./framesync-409e5dda.js";import"./@motionone-d9be48c4.js";import"./material-ripple-effects-ffa693ae.js";import"./@floating-ui-b9e68a19.js";import"./aria-hidden-318acb9e.js";import"./tabbable-6ab97b54.js";import"./react-dom-c53f0256.js";import"./scheduler-765c72db.js";import"./goober-70b4b9ca.js";import"./tw-elements-ab3535c4.js";import"./react-icons-a30789ef.js";import"./flowbite-react-5800ef7d.js";import"./react-indiana-drag-scroll-6942150b.js";import"./recharts-b436783c.js";import"./clsx-0839fdbe.js";import"./lodash-36a35ae7.js";import"./react-smooth-ce808070.js";import"./fast-equals-a0711cdd.js";import"./tiny-invariant-dd7d57d2.js";import"./d3-shape-9e788a4f.js";import"./d3-path-41c4cb36.js";import"./victory-vendor-5e3e398c.js";import"./d3-scale-4cce9527.js";import"./internmap-7949acc8.js";import"./d3-array-7d9b19f9.js";import"./d3-time-format-aa787c71.js";import"./d3-time-9ce187c0.js";import"./d3-interpolate-8fa1f6ff.js";import"./d3-color-6502c434.js";import"./d3-format-ffdb8652.js";import"./recharts-scale-170b47f7.js";import"./decimal.js-light-6fe16ef2.js";import"./eventemitter3-5051c9e6.js";import"./@remix-run-3d0d33fe.js";import"./property-expr-38205fa5.js";import"./tiny-case-d0726479.js";import"./toposort-dff2028e.js";const q={email:"",password:""},S={email:[],password:[]},z=()=>{var p,u;const[n,i]=y.useState(q),[r,d]=y.useState(""),[o]=y.useState(S),a=T(),h=l=>{const g=l.target.name,s=l.target.value;i(b=>({...b,[g]:s}))},f=async()=>{const{data:l}=await x.get("/api/user");console.log(l)},c=async l=>{l.preventDefault(),await x.get("/sanctum/csrf-cookie").then(g=>{console.log(g),window.setTimeout(()=>m.success(e.jsx("p",{className:"capitalize",children:"Authenticating..."})),1e3),x.post("/login",n).then(s=>{console.log(s);const b=s.data.data.token;x.defaults.headers.common.Authorization=`Bearer ${b}`,console.log("Response:Token "+s.data.data.token),f(),d(s.data.data.role),r=="admin"&&a("/admin/dashboard"),r=="Artist"&&a("/artist/dashboard"),r=="nominator"&&a("/nominator/dashboard"),r=="judge"&&a("/judge/dashboard")}).catch(s=>{s.response.status===422&&console.log(s.response.data.errors)})}).catch(()=>{window.setTimeout(()=>m.error(e.jsx("p",{className:"capitalize font-LatoBold",children:"Failed to login...Try again"})),1e3)})};return e.jsxs(e.Fragment,{children:[e.jsx(t.Card,{className:"w-96 shadow-none",children:e.jsxs("form",{onSubmit:c,children:[e.jsx(t.CardHeader,{className:"flex flex-col items-center justify-center shadow-none",children:e.jsx(t.Typography,{className:"self-start pl-2 text-lg text-gray-900 font-LatoRegular",children:"Enter account credentials to login."})}),e.jsxs(t.CardBody,{className:"flex flex-col gap-4 my-1",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"font-LatoBold capitalize text-gray-900",children:"email address"}),e.jsx("input",{placeholder:"Enter your Email Address",type:"email",name:"email",onChange:h,className:"pl-4 rounded-lg w-full font-LatoRegular border border-gray-500"}),((p=o==null?void 0:o.email)==null?void 0:p.length)>0&&e.jsx("span",{className:"text-red-400 text-sm m-2 p-2",children:o.email[0]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"font-LatoBold capitalize text-gray-900",children:"password"}),e.jsx("input",{placeholder:"Enter Your Password",type:"password",name:"password",onChange:h,className:"pl-4 rounded-lg w-full font-LatoRegular border border-gray-500"}),((u=o==null?void 0:o.password)==null?void 0:u.length)>0&&e.jsx("span",{className:"text-red-400 text-sm m-2 p-2",children:o.password[0]})]})]}),e.jsxs(t.CardFooter,{className:"pt-0",children:[e.jsx(t.Button,{variant:"gradient",fullWidth:!0,className:"bg-gray-950 hover:bg-yellow-300 text-white hover:text-gray-950 transition ease-in-out font-LatoBold",onClick:c,children:"Log In"}),e.jsx(v,{to:"/recovery",children:e.jsx(t.Typography,{variant:"small",className:"mt-6 flex justify-center font-LatoRegular transition-all ease-in-out hover:underline hover:underline-offset-4",children:"Forgot Password?"})})]})]})}),e.jsx(N,{position:"top-center",containerClassName:"font-LatoRegular",toastOptions:{duration:5e3,style:{background:"#333",color:"#fff"}}})]})},P=E().shape({username:j().trim().required("Username is required"),email:j().email().required("Email is required"),password:j().required("Password is required").min(8,"Password must be at least 8 characters"),password_confirmation:j().required("Please Confirm your Password").oneOf([$("password")],"Passwords do not match")}),_=()=>{var f,c,p,u;const n="https://api.bongomusicawards.co.tz/api/v1",[i,r]=y.useState(!1),{register:d,handleSubmit:o,formState:{errors:a}}=F({resolver:B(P)}),h=async l=>{r(!0),C.post(`${n}/v1/register`,l).then(g=>{if(g.status==201){r(!1);const s=m.success("Registration successful.");setTimeout(()=>{m.dismiss(s),window.location.reload()},3e3)}else r(!1),m.error("Registration Failed. Try again later!")}).catch(()=>{r(!1),m.error("Registration Failed. Try again later!")})};return e.jsx(e.Fragment,{children:i?e.jsxs("div",{className:"mt-4 flex flex-col items-center justify-center",children:[e.jsx(k,{color:"#0d0d0d"}),e.jsx(t.Typography,{className:"font-LatoRegular text-sm capitalize text-gray-900",children:"setting things up. please wait a few seconds."})]}):e.jsx(e.Fragment,{children:e.jsxs("form",{onSubmit:o(h),className:"gap-auto mb-auto mt-0 flex w-full max-w-screen-lg flex-col gap-2 sm:w-96",children:[e.jsx(t.Typography,{variant:"paragraph",className:"font-LatoBold text-base",children:"Fill in the form below to create an account"}),e.jsxs("div",{className:"w-full",children:[e.jsx("input",{...d("username",{required:!0}),placeholder:"Enter your username",className:`w-full h-10 pl-4 rounded-lg border ${a.username?"border-red-500":"border-gray-400"} font-LatoRegular text-sm rounded bg-white`}),a.username&&e.jsx(w,{message:`${(f=a.username)==null?void 0:f.message}`})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("input",{...d("email",{required:!0}),placeholder:"Enter your email",className:`w-full h-10 pl-4 rounded-lg border ${a.email?"border-red-500":"border-gray-400"} font-LatoRegular text-sm rounded bg-white`}),a.email&&e.jsx(w,{message:`${(c=a.email)==null?void 0:c.message}`})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("input",{...d("password",{required:!0,minLength:6}),placeholder:"Enter your password",type:"password",className:`w-full h-10 pl-4 rounded-lg border ${a.password?"border-red-500":"border-gray-400"} font-LatoRegular text-sm rounded bg-white`}),a.password&&e.jsx(w,{message:`${(p=a.password)==null?void 0:p.message}`})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("input",{...d("password_confirmation",{required:!0}),placeholder:"Confirm your password",type:"password",className:`w-full h-10 pl-4 rounded-lg border ${a.password_confirmation?"border-red-500":"border-gray-400"} font-LatoRegular text-sm rounded bg-white`}),a.password_confirmation&&e.jsx(w,{message:`${(u=a.password_confirmation)==null?void 0:u.message}`})]}),e.jsx(t.Button,{type:"submit",className:"bg-gray-950 font-LatoBold text-white transition ease-in-out hover:bg-yellow-300 hover:text-gray-950",children:"submit"})]})})})},A=()=>e.jsxs(t.Card,{className:"w-96 shadow-none",children:[e.jsx(_,{}),e.jsx(N,{position:"top-center",containerClassName:"font-LatoRegular",toastOptions:{duration:5e3,style:{background:"#333",color:"#fff"}}})]}),He=()=>{const n=[{label:"LOGIN",value:"login",desc:e.jsx(z,{})},{label:"REGISTER",value:"register",desc:e.jsx(A,{})}];return e.jsxs("section",{className:"relative px-4 w-full h-screen flex flex-col items-center justify-center bg-white",children:[e.jsx("img",{className:"absolute w-full h-full top-0 left-0 z-0 object-cover object-center bg-yellow-200 opacity-5",src:L,loading:"lazy"}),e.jsxs("div",{className:"w-full lg:w-1/2 shadow-none z-10",children:[e.jsx("div",{className:"w-full flex flex-row items-center justify-center my-4",children:e.jsx(v,{to:"/",className:"cursor-pointer",children:e.jsx("img",{src:R,alt:"bongo music awards logo",className:"text-sm w-36"})})}),e.jsxs(t.Tabs,{id:"custom-animation",value:"html",children:[e.jsx(t.TabsHeader,{className:"text-gray-950 bg-gradient-to-r from-yellow-300 to-white",children:n.map(({label:i,value:r})=>e.jsx(t.Tab,{value:r,className:"hover:bg-white hover:rounded-md text-gray-900 font-LatoBold",children:i},r))}),e.jsx(t.TabsBody,{animate:{initial:{y:250},mount:{y:0},unmount:{y:250}},className:"bg-white rounded-md shadow",children:n.map(({value:i,desc:r})=>e.jsx(t.TabPanel,{value:i,className:"flex items-center justify-center",children:r},i))}),e.jsx("p",{className:"font-LatoRegular text-gray-600 text-xs text-center pt-4",children:"Â© All rights reserved."})]})]})]})};export{He as default};
